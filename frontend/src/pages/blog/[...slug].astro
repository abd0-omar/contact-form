---
import BlogLayout from "@/layouts/BlogLayout.astro";
import { getCollection, type CollectionEntry } from "astro:content";

// Generate static paths for all blog posts
export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}

const { post } = Astro.props as { post: CollectionEntry<"blog"> };
const { Content } = await post.render();
---

<BlogLayout>
    <article class="prose prose-invert prose-lg max-w-none">
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-[#b0b0b0] mb-4">
                {post.data.title}
            </h1>
            <div class="text-[#a0a0a0]">
                {
                    new Date(post.data.date).toLocaleDateString("en-US", {
                        year: "numeric",
                        month: "long",
                        day: "numeric",
                    })
                }
            </div>
        </header>

        <div
            class="prose-headings:text-[#b0b0b0] prose-p:text-[#a0a0a0] prose-strong:text-[#b0b0b0] prose-a:text-[#b0b0b0] prose-ul:text-[#a0a0a0] prose-ol:text-[#a0a0a0] prose-li:text-[#a0a0a0]"
        >
            <Content />
        </div>
    </article>
</BlogLayout>
